<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M√©todo Aerodin√°mico - UNALM</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            background-color: #f5f5f5;
        }

        .header {
            background-color: #0C6854;
            color: white;
            padding: 20px;
            text-align: center;
        }

        .header h1 {
            font-size: 20px;
            margin-bottom: 8px;
        }

        .header p {
            font-size: 13px;
            margin: 3px 0;
        }

        .container {
            max-width: 800px;
            margin: 30px auto;
            padding: 20px;
        }

        .back-btn {
            display: inline-block;
            background-color: #0C6854;
            color: white;
            padding: 8px 20px;
            text-decoration: none;
            border-radius: 5px;
            margin-bottom: 20px;
            font-size: 14px;
        }

        .back-btn:hover {
            background-color: #084a3a;
        }

        .module-card {
            background: white;
            padding: 30px;
            border-radius: 8px;
            border-left: 4px solid #0C6854;
            margin-bottom: 20px;
        }

        .module-card h2 {
            color: #0C6854;
            margin-bottom: 15px;
            font-size: 22px;
        }

        .description {
            background: #f0f9f7;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 25px;
            line-height: 1.6;
        }

        .formula-box {
            background: #e8f5f1;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
        }

        .formula-box h3 {
            color: #0C6854;
            margin-bottom: 10px;
            font-size: 16px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            color: #333;
            font-weight: bold;
            margin-bottom: 8px;
            font-size: 15px;
        }

        .form-group input {
            width: 100%;
            padding: 12px;
            border: 2px solid #0C6854;
            border-radius: 5px;
            font-size: 16px;
        }

        .form-group input:focus {
            outline: none;
            border-color: #084a3a;
            box-shadow: 0 0 5px rgba(12, 104, 84, 0.3);
        }

        .form-group small {
            display: block;
            color: #666;
            margin-top: 5px;
            font-size: 13px;
        }

        .btn-calculate {
            background-color: #0C6854;
            color: white;
            padding: 15px 40px;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            width: 100%;
            margin-top: 10px;
            transition: background-color 0.3s;
        }

        .btn-calculate:hover {
            background-color: #084a3a;
        }

        .results {
            background: white;
            padding: 25px;
            border-radius: 8px;
            border-left: 4px solid #0C6854;
            margin-top: 25px;
            display: none;
        }

        .results.show {
            display: block;
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .results h3 {
            color: #0C6854;
            margin-bottom: 20px;
            font-size: 20px;
        }

        .result-item {
            background: #f0f9f7;
            padding: 12px;
            margin: 10px 0;
            border-radius: 5px;
        }

        .result-item strong {
            color: #0C6854;
        }

        .result-final {
            background: #0C6854;
            color: white;
            padding: 20px;
            border-radius: 5px;
            text-align: center;
            margin-top: 15px;
            font-size: 18px;
        }

        .result-final .value {
            font-size: 32px;
            font-weight: bold;
            margin: 10px 0;
        }

        .example-box {
            background: #fff3cd;
            border: 1px solid #ffc107;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
        }

        .example-box h4 {
            color: #856404;
            margin-bottom: 10px;
        }

        @media (max-width: 600px) {
            .container {
                padding: 15px;
            }

            .module-card {
                padding: 20px;
            }

            .header h1 {
                font-size: 18px;
            }

            .header p {
                font-size: 12px;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Universidad Nacional Agraria La Molina</h1>
        <p>Maestr√≠a en Recursos H√≠dricos</p>
        <p>Curso: M√©todos de an√°lisis en ingenier√≠a de recursos h√≠dricos</p>
        <p>Autor: Luis Robles</p>
    </div>

    <div class="container">
        <a href="../index.html" class="back-btn">‚Üê Volver al Men√∫</a>

        <div class="module-card">
            <h2>üí® M√©todo Aerodin√°mico</h2>
            
            <div class="description">
                <p>
                    El m√©todo aerodin√°mico calcula la tasa de evaporaci√≥n utilizando la transferencia 
                    turbulenta de vapor de agua desde la superficie. Este m√©todo considera la velocidad 
                    del viento, temperatura del aire, humedad relativa y altura de rugosidad de la superficie.
                </p>
            </div>

            <div class="formula-box">
                <h3>üìê F√≥rmulas</h3>
                <p><strong>1. Coeficiente de transferencia de vapor (B):</strong></p>
                <p>B = (0.622 √ó k¬≤ √ó œÅ<sub>a</sub> √ó u<sub>2</sub>) / [p √ó œÅ<sub>w</sub> √ó (ln(z<sub>2</sub>/z<sub>0</sub>))¬≤]</p>
                <br>
                <p><strong>2. Presi√≥n de vapor saturado (e<sub>as</sub>):</strong></p>
                <p>e<sub>as</sub> = 611 √ó exp[(17.27 √ó T) / (T + 237.3)]</p>
                <br>
                <p><strong>3. Presi√≥n de vapor actual (e<sub>a</sub>):</strong></p>
                <p>e<sub>a</sub> = (HR / 100) √ó e<sub>as</sub></p>
                <br>
                <p><strong>4. Evaporaci√≥n (E<sub>a</sub>):</strong></p>
                <p>E<sub>a</sub> = B √ó (e<sub>as</sub> - e<sub>a</sub>)</p>
            </div>

            <div class="example-box">
                <h4>üí° Ejemplo 3.5.2 (Ven Te Chow)</h4>
                <p><strong>Datos:</strong></p>
                <p>‚Ä¢ T = 25¬∞C</p>
                <p>‚Ä¢ HR = 40%</p>
                <p>‚Ä¢ P = 101.3 kPa</p>
                <p>‚Ä¢ u<sub>2</sub> = 3 m/s (a 2 m de altura)</p>
                <p>‚Ä¢ z<sub>0</sub> = 0.03 cm = 0.0003 m</p>
                <p>‚Ä¢ k = 0.4 (constante von K√°rm√°n)</p>
                <p><strong>Resultado esperado:</strong> 7.45 mm/d√≠a</p>
            </div>

            <form id="calculatorForm">
                <div class="form-group">
                    <label for="temperatura">Temperatura del aire (T):</label>
                    <input type="number" id="temperatura" step="0.1" value="25" required>
                    <small>Unidades: ¬∞C</small>
                </div>

                <div class="form-group">
                    <label for="humedad">Humedad relativa (HR):</label>
                    <input type="number" id="humedad" step="0.1" value="40" required>
                    <small>Unidades: % (0-100)</small>
                </div>

                <div class="form-group">
                    <label for="presion">Presi√≥n atmosf√©rica (P):</label>
                    <input type="number" id="presion" step="0.1" value="101.3" required>
                    <small>Unidades: kPa</small>
                </div>

                <div class="form-group">
                    <label for="viento">Velocidad del viento (u<sub>2</sub>):</label>
                    <input type="number" id="viento" step="0.1" value="3" required>
                    <small>Unidades: m/s (a 2 m de altura)</small>
                </div>

                <div class="form-group">
                    <label for="rugosidad">Altura de rugosidad (z<sub>0</sub>):</label>
                    <input type="number" id="rugosidad" step="0.0001" value="0.0003" required>
                    <small>Unidades: m (ejemplo: 0.0003 m = 0.03 cm para agua)</small>
                </div>

                <button type="submit" class="btn-calculate">üî¨ Calcular Evaporaci√≥n</button>
            </form>
        </div>

        <div class="results" id="results">
            <h3>üìä Resultados del C√°lculo</h3>
            
            <div class="result-item">
                <strong>Densidad del aire (œÅ<sub>a</sub>):</strong>
                <span id="densidadAire">-</span> kg/m¬≥
            </div>

            <div class="result-item">
                <strong>Densidad del agua (œÅ<sub>w</sub>):</strong>
                <span id="densidadAgua">-</span> kg/m¬≥
            </div>

            <div class="result-item">
                <strong>Coeficiente B:</strong>
                <span id="coeficienteB">-</span> m/Pa¬∑s
            </div>

            <div class="result-item">
                <strong>Presi√≥n de vapor saturado (e<sub>as</sub>):</strong>
                <span id="presionSaturada">-</span> Pa
            </div>

            <div class="result-item">
                <strong>Presi√≥n de vapor actual (e<sub>a</sub>):</strong>
                <span id="presionActual">-</span> Pa
            </div>

            <div class="result-item">
                <strong>Tasa de evaporaci√≥n (E<sub>a</sub>):</strong>
                <span id="tasaEvaporacion">-</span> m/s
            </div>

            <div class="result-final">
                <div>Evaporaci√≥n Diaria</div>
                <div class="value" id="evaporacionDiaria">-</div>
                <div>mm/d√≠a</div>
            </div>

            <div style="margin-top: 20px; padding: 15px; background: #e8f5f1; border-radius: 5px;">
                <strong>üìù Procedimiento:</strong>
                <ol style="margin-top: 10px; padding-left: 20px; line-height: 1.8;">
                    <li>Calcular densidad del aire seg√∫n temperatura</li>
                    <li>Calcular coeficiente B seg√∫n ecuaci√≥n (3.5.18)</li>
                    <li>Calcular e<sub>as</sub> y e<sub>a</sub></li>
                    <li>Aplicar E<sub>a</sub> = B √ó (e<sub>as</sub> - e<sub>a</sub>)</li>
                    <li>Convertir de m/s a mm/d√≠a</li>
                </ol>
            </div>
        </div>
    </div>

    <script>
        // Tabla 3.2.1 - Presi√≥n de vapor de saturaci√≥n (Pa)
        const presionVaporSaturacion = {
            '-20': 125, '-10': 286, 0: 611, 5: 872, 10: 1227,
            15: 1704, 20: 2337, 25: 3167, 30: 4243, 35: 5624, 40: 7378
        };

        // Tabla 2.5.2 - Densidad del agua seg√∫n temperatura (kg/m¬≥)
        const densidadAgua = {
            0: 1000, 5: 1000, 10: 1000, 15: 999, 20: 998, 25: 997,
            30: 996, 35: 994, 40: 992, 50: 988, 60: 983, 70: 978,
            80: 972, 90: 965, 100: 958
        };

        // Interpolaci√≥n lineal gen√©rica
        function interpolar(tabla, T) {
            const temperaturas = Object.keys(tabla).map(Number).sort((a, b) => a - b);
            
            if (tabla[T] !== undefined) {
                return tabla[T];
            }
            
            let T1 = temperaturas[0], T2 = temperaturas[temperaturas.length - 1];
            for (let i = 0; i < temperaturas.length - 1; i++) {
                if (temperaturas[i] <= T && temperaturas[i + 1] >= T) {
                    T1 = temperaturas[i];
                    T2 = temperaturas[i + 1];
                    break;
                }
            }
            
            const val1 = tabla[T1];
            const val2 = tabla[T2];
            return val1 + (val2 - val1) * (T - T1) / (T2 - T1);
        }

        // Funci√≥n para calcular densidad del aire (kg/m¬≥)
        function obtenerDensidadAire(T) {
            // F√≥rmula: œÅ_a = 1.293 √ó (273 / (273 + T))
            return 1.293 * (273 / (273 + T));
        }

        const form = document.getElementById('calculatorForm');
        const resultsDiv = document.getElementById('results');

        form.addEventListener('submit', function(e) {
            e.preventDefault();
            calcularEvaporacion();
        });

        function calcularEvaporacion() {
            // Obtener valores
            const T = parseFloat(document.getElementById('temperatura').value);
            const HR = parseFloat(document.getElementById('humedad').value);
            const P = parseFloat(document.getElementById('presion').value);
            const u2 = parseFloat(document.getElementById('viento').value);
            const z0 = parseFloat(document.getElementById('rugosidad').value);

            // Validar
            if (isNaN(T) || isNaN(HR) || isNaN(P) || isNaN(u2) || isNaN(z0)) {
                alert('Por favor ingrese valores v√°lidos');
                return;
            }

            if (T < -20 || T > 40) {
                alert('Temperatura fuera del rango de la Tabla 3.2.1 (-20¬∞C a 40¬∞C)');
                return;
            }

            // Constantes
            const k = 0.4; // Constante von K√°rm√°n
            const z2 = 2.0; // Altura de medici√≥n (m)
            
            // Densidades
            const rho_a = obtenerDensidadAire(T);
            const rho_w = Math.round(interpolar(densidadAgua, T));

            // 1. Coeficiente B (ecuaci√≥n 3.5.18)
            // B = (0.622 √ó k¬≤ √ó œÅ_a √ó u2) / (P √ó œÅ_w √ó [ln(z2/z0)]¬≤)
            const numerador = 0.622 * Math.pow(k, 2) * rho_a * u2;
            const denominador = P * 1000 * rho_w * Math.pow(Math.log(z2 / z0), 2);
            const B = numerador / denominador;

            // 2. Presi√≥n de vapor saturado (Pa) - Tabla 3.2.1 con interpolaci√≥n
            const e_as = interpolar(presionVaporSaturacion, T);

            // 3. Presi√≥n de vapor actual (Pa) - ecuaci√≥n (3.2.11)
            // R_h = e / e_s ‚Üí e = R_h √ó e_s
            const e_a = (HR / 100) * e_as;

            // 4. Tasa de evaporaci√≥n (m/s) - ecuaci√≥n (3.5.17)
            // E_a = B √ó (e_as - e_a)
            const Ea = B * (e_as - e_a);

            // 5. Convertir a mm/d√≠a
            const evaporacionDiaria = Ea * 1000 * 86400;

            // Mostrar resultados
            document.getElementById('densidadAire').textContent = rho_a.toFixed(2);
            document.getElementById('densidadAgua').textContent = rho_w;
            document.getElementById('coeficienteB').textContent = B.toExponential(2);
            document.getElementById('presionSaturada').textContent = Math.round(e_as);
            document.getElementById('presionActual').textContent = Math.round(e_a);
            document.getElementById('tasaEvaporacion').textContent = Ea.toExponential(2);
            document.getElementById('evaporacionDiaria').textContent = evaporacionDiaria.toFixed(2);

            resultsDiv.classList.add('show');
            resultsDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' });

            // Log detallado
            console.log('=== M√âTODO AERODIN√ÅMICO ===');
            console.log('DATOS DE ENTRADA:');
            console.log('  T =', T, '¬∞C');
            console.log('  HR =', HR, '%');
            console.log('  P =', P, 'kPa');
            console.log('  u2 =', u2, 'm/s');
            console.log('  z0 =', z0, 'm');
            console.log('  k =', k, '(von K√°rm√°n)');
            console.log('PAR√ÅMETROS CALCULADOS:');
            console.log('  œÅ_a =', rho_a.toFixed(2), 'kg/m¬≥ (densidad aire)');
            console.log('  œÅ_w =', rho_w, 'kg/m¬≥ (Tabla 2.5.2)');
            console.log('  e_as =', Math.round(e_as), 'Pa (Tabla 3.2.1)');
            console.log('  e_a =', Math.round(e_a), 'Pa (HR √ó e_as)');
            console.log('  B =', B.toExponential(6), 'm/Pa¬∑s');
            console.log('RESULTADO:');
            console.log('  E_a =', Ea.toExponential(6), 'm/s');
            console.log('  Evaporaci√≥n =', evaporacionDiaria.toFixed(2), 'mm/d√≠a');
            console.log('========================');
        }
    </script>
</body>
</html>